{"filter":false,"title":"index.js","tooltip":"/routes/index.js","undoManager":{"mark":46,"position":46,"stack":[[{"start":{"row":395,"column":25},"end":{"row":396,"column":0},"action":"insert","lines":["",""],"id":294},{"start":{"row":396,"column":0},"end":{"row":396,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":396,"column":4},"end":{"row":397,"column":0},"action":"insert","lines":["",""],"id":295},{"start":{"row":397,"column":0},"end":{"row":397,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":396,"column":4},"end":{"row":397,"column":0},"action":"insert","lines":["",""],"id":296},{"start":{"row":397,"column":0},"end":{"row":397,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":397,"column":4},"end":{"row":410,"column":5},"action":"insert","lines":["var usernames = twitter.extractMentions(contentq);","    var i","    for (i = 0; i < usernames.length; i++) { ","    console.log(usernames[i]);","    var newc = contentq.replace(\"@\"+usernames[i],\"<a style=\\\"text-decoration:none; color:#6666ff\\\" href=\\\"/user/\"+usernames[i]+\"\\\">\"+\"@\"+usernames[i]+\"</a>\");","    console.log(newc);","    contentq=newc;","    User.findOne({username:usernames[i]}, function(err, doc) {","        if (err) return next(err);","       doc.notamount=doc.notamount+1;","       doc.notifications.unshift({from: req.user.username, type: \"mention\", redirect:\"/cookie/\"+newid, mini:marked(contentq)});","       doc.save();","    });","    }"],"id":297}],[{"start":{"row":397,"column":51},"end":{"row":397,"column":52},"action":"remove","lines":["q"],"id":298}],[{"start":{"row":397,"column":50},"end":{"row":397,"column":51},"action":"remove","lines":["t"],"id":299}],[{"start":{"row":397,"column":49},"end":{"row":397,"column":50},"action":"remove","lines":["n"],"id":300}],[{"start":{"row":397,"column":48},"end":{"row":397,"column":49},"action":"remove","lines":["e"],"id":301}],[{"start":{"row":397,"column":47},"end":{"row":397,"column":48},"action":"remove","lines":["t"],"id":302}],[{"start":{"row":397,"column":46},"end":{"row":397,"column":47},"action":"remove","lines":["n"],"id":303}],[{"start":{"row":397,"column":46},"end":{"row":397,"column":47},"action":"insert","lines":["m"],"id":304}],[{"start":{"row":397,"column":47},"end":{"row":397,"column":48},"action":"insert","lines":["m"],"id":305}],[{"start":{"row":397,"column":48},"end":{"row":397,"column":49},"action":"insert","lines":["e"],"id":306}],[{"start":{"row":397,"column":44},"end":{"row":397,"column":49},"action":"remove","lines":["comme"],"id":307},{"start":{"row":397,"column":44},"end":{"row":397,"column":54},"action":"insert","lines":["commentval"]}],[{"start":{"row":401,"column":15},"end":{"row":401,"column":23},"action":"remove","lines":["contentq"],"id":308},{"start":{"row":401,"column":15},"end":{"row":401,"column":25},"action":"insert","lines":["commentval"]}],[{"start":{"row":403,"column":4},"end":{"row":403,"column":12},"action":"remove","lines":["contentq"],"id":309},{"start":{"row":403,"column":4},"end":{"row":403,"column":14},"action":"insert","lines":["commentval"]}],[{"start":{"row":407,"column":115},"end":{"row":407,"column":123},"action":"remove","lines":["contentq"],"id":310},{"start":{"row":407,"column":115},"end":{"row":407,"column":125},"action":"insert","lines":["commentval"]}],[{"start":{"row":381,"column":31},"end":{"row":382,"column":0},"action":"insert","lines":["",""],"id":311},{"start":{"row":382,"column":0},"end":{"row":382,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":382,"column":4},"end":{"row":382,"column":42},"action":"insert","lines":["var newid = mongoose.Types.ObjectId();"],"id":312}],[{"start":{"row":408,"column":66},"end":{"row":408,"column":67},"action":"insert","lines":["c"],"id":313}],[{"start":{"row":408,"column":67},"end":{"row":408,"column":68},"action":"insert","lines":["o"],"id":314}],[{"start":{"row":408,"column":68},"end":{"row":408,"column":69},"action":"insert","lines":["m"],"id":315}],[{"start":{"row":414,"column":33},"end":{"row":414,"column":34},"action":"insert","lines":["_"],"id":316}],[{"start":{"row":414,"column":34},"end":{"row":414,"column":35},"action":"insert","lines":["d"],"id":317}],[{"start":{"row":414,"column":34},"end":{"row":414,"column":35},"action":"remove","lines":["d"],"id":318}],[{"start":{"row":414,"column":34},"end":{"row":414,"column":35},"action":"insert","lines":["i"],"id":319}],[{"start":{"row":414,"column":35},"end":{"row":414,"column":36},"action":"insert","lines":["d"],"id":320}],[{"start":{"row":414,"column":36},"end":{"row":414,"column":37},"action":"insert","lines":[":"],"id":321}],[{"start":{"row":414,"column":37},"end":{"row":414,"column":38},"action":"insert","lines":[" "],"id":322}],[{"start":{"row":414,"column":38},"end":{"row":414,"column":39},"action":"insert","lines":["n"],"id":323}],[{"start":{"row":414,"column":39},"end":{"row":414,"column":40},"action":"insert","lines":["e"],"id":324}],[{"start":{"row":414,"column":40},"end":{"row":414,"column":41},"action":"insert","lines":["w"],"id":325}],[{"start":{"row":414,"column":41},"end":{"row":414,"column":42},"action":"insert","lines":["i"],"id":326}],[{"start":{"row":414,"column":42},"end":{"row":414,"column":43},"action":"insert","lines":["d"],"id":327}],[{"start":{"row":414,"column":43},"end":{"row":414,"column":44},"action":"insert","lines":[" "],"id":328}],[{"start":{"row":414,"column":44},"end":{"row":414,"column":45},"action":"insert","lines":[","],"id":329}],[{"start":{"row":414,"column":44},"end":{"row":414,"column":45},"action":"remove","lines":[","],"id":330}],[{"start":{"row":414,"column":43},"end":{"row":414,"column":44},"action":"remove","lines":[" "],"id":331}],[{"start":{"row":414,"column":43},"end":{"row":414,"column":44},"action":"insert","lines":[","],"id":332}],[{"start":{"row":414,"column":44},"end":{"row":414,"column":45},"action":"insert","lines":[" "],"id":333}],[{"start":{"row":408,"column":101},"end":{"row":408,"column":102},"action":"remove","lines":["w"],"id":334}],[{"start":{"row":408,"column":100},"end":{"row":408,"column":101},"action":"remove","lines":["e"],"id":335}],[{"start":{"row":408,"column":99},"end":{"row":408,"column":100},"action":"remove","lines":["n"],"id":336}],[{"start":{"row":280,"column":25},"end":{"row":280,"column":26},"action":"insert","lines":["1"],"id":337}],[{"start":{"row":280,"column":25},"end":{"row":280,"column":26},"action":"remove","lines":["1"],"id":338}],[{"start":{"row":280,"column":26},"end":{"row":280,"column":27},"action":"insert","lines":["1"],"id":339}],[{"start":{"row":280,"column":26},"end":{"row":280,"column":27},"action":"remove","lines":["1"],"id":340}]]},"ace":{"folds":[],"scrolltop":3778.5,"scrollleft":0,"selection":{"start":{"row":280,"column":28},"end":{"row":280,"column":28},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1456239101619,"hash":"eafe910bcaf83ec1a3fbf66301d38080b8d08b03"}